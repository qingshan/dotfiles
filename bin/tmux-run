#!/usr/bin/env bash

POSITION="right"
while [ $# -gt 0 ]; do
    case $1 in
    right|bottom) POSITION="$1" ;;
    --) ;;
    *) break ;;
    esac
    shift
done

if [ "$POSITION" = "bottom" ]; then
  tmux if-shell -F '#{e|==:#{window_panes},1}' 'split-window -d -v -l 15 -c "#{pane_current_path}"' 'respawn-pane -k -t "{bottom}" -c "#{pane_current_path}'
else
  tmux if-shell -F '#{e|==:#{window_panes},1}' 'split-window -d -h -l 80 -c "#{pane_current_path}"' 'respawn-pane -k -t "{right}" -c "#{pane_current_path}'
fi
tmux run-shell 'sleep 0.2'
tmux send-keys -t "{$POSITION}" "$*" Enter
